<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Resultado do Teste de Prosperidade</title>
    
    <!-- Meta Tags para SEO e Compartilhamento -->
    <meta name="description" content="Descubra sua energia predominante e o caminho para a prosperidade plena" id="meta-description">
    <meta name="keywords" content="teste prosperidade, energia, crescimento pessoal, suellen seragi">
    <meta name="author" content="Suellen Seragi">
    
    <!-- Open Graph para Compartilhamento -->
    <meta property="og:title" content="Resultado do Teste de Prosperidade" id="og-title">
    <meta property="og:description" content="Descubra sua energia predominante e o caminho para a prosperidade plena" id="og-description">
    <meta property="og:image" content="https://github.com/renatoambrosi/quizresultado/raw/main/assets/images/Teste%20Prosperidade%20Header.jpg" id="og-image">
    <meta property="og:url" content="" id="og-url">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Suellen Seragi">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Resultado do Teste de Prosperidade" id="twitter-title">
    <meta name="twitter:description" content="Descubra sua energia predominante e o caminho para a prosperidade plena" id="twitter-description">
    <meta name="twitter:image" content="https://github.com/renatoambrosi/quizresultado/raw/main/assets/images/Teste%20Prosperidade%20Header.jpg">
    
    <!-- Fonts e Ícones -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://github.com/renatoambrosi/quizresultado/raw/main/assets/images/Logo%20Suellen.png">
    
    <style>
        :root {
            --primary-color: #8B4513;
            --secondary-color: #D2691E;
            --accent-color: #228B22;
            --text-dark: #2C1810;
            --text-light: #6B4423;
            --background-light: #FFF8DC;
            --background-white: #FFFFFF;
            --border-light: #E5D4B1;
            --shadow-light: rgba(139, 69, 19, 0.1);
            --shadow-medium: rgba(139, 69, 19, 0.2);
            --gradient-primary: linear-gradient(135deg, #8B4513, #D2691E);
            --gradient-secondary: linear-gradient(135deg, #228B22, #32CD32);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background: var(--background-light);
            background-image: url('https://github.com/renatoambrosi/quizresultado/raw/main/assets/images/Suellen%20Fundo.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-repeat: no-repeat;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 248, 220, 0.85);
            z-index: -1;
            pointer-events: none;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 20px 0 40px;
            background: var(--background-white);
            background-image: url('https://github.com/renatoambrosi/quizresultado/raw/main/assets/images/Teste%20Prosperidade%20Header.jpg');
            background-size: cover;
            background-position: center;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px var(--shadow-light);
            position: relative;
            overflow: hidden;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(139, 69, 19, 0.8), rgba(210, 105, 30, 0.6));
            z-index: 1;
        }

        .header > * {
            position: relative;
            z-index: 2;
        }

        .logo {
            width: 200px;
            height: auto;
            margin-bottom: 20px;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
        }

        .main-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.2em;
            font-weight: 600;
            color: white;
            margin-bottom: 10px;
            line-height: 1.3;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .subtitle {
            font-size: 1.1em;
            color: rgba(255, 255, 255, 0.95);
            margin-bottom: 25px;
            font-weight: 500;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }

        /* Energia Predominante */
        .energia-destaque {
            background: var(--gradient-primary);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 8px 30px var(--shadow-medium);
            position: relative;
            overflow: hidden;
        }

        .energia-destaque::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: rotate(45deg);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .energia-destaque h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5em;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }

        .energia-percentage {
            font-size: 1.3em;
            font-weight: 600;
            opacity: 0.95;
            position: relative;
            z-index: 1;
        }

        /* Painel de Percentuais */
        .percentuais-panel {
            background: var(--background-white);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 8px 30px var(--shadow-light);
        }

        .percentuais-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5em;
            color: var(--primary-color);
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
        }

        .energia-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-light);
        }

        .energia-item:last-child {
            border-bottom: none;
        }

        .energia-name {
            font-weight: 500;
            color: var(--text-dark);
        }

        .energia-bar {
            flex: 1;
            height: 8px;
            background: var(--border-light);
            border-radius: 10px;
            margin: 0 15px;
            overflow: hidden;
        }

        .energia-fill {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: 10px;
            transition: width 1.5s ease-out;
            width: 0%;
        }

        .energia-percent {
            font-weight: 600;
            color: var(--primary-color);
            min-width: 45px;
            text-align: right;
        }

        /* Botões de Compartilhamento */
        .share-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .share-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 0.95em;
        }

        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px var(--shadow-medium);
        }

        .share-btn.primary {
            background: var(--gradient-primary);
            color: white;
        }

        .share-btn.secondary {
            background: var(--background-white);
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        /* Vídeo */
        .video-section {
            background: var(--background-white);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 8px 30px var(--shadow-light);
            text-align: center;
        }

        .video-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5em;
            color: var(--primary-color);
            margin-bottom: 20px;
            font-weight: 600;
        }

        .video-container {
            position: relative;
            width: 100%;
            height: 0;
            padding-bottom: 56.25%;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 8px 25px var(--shadow-light);
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Narrativa do Resultado */
        .resultado-content {
            background: var(--background-white);
            padding: 40px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 8px 30px var(--shadow-light);
            line-height: 1.8;
        }

        .resultado-content h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.8em;
            color: var(--primary-color);
            margin-bottom: 25px;
            font-weight: 600;
        }

        .resultado-content h4 {
            font-family: 'Playfair Display', serif;
            font-size: 1.4em;
            color: var(--primary-color);
            margin: 30px 0 15px;
            font-weight: 600;
        }

        .resultado-content p {
            margin-bottom: 20px;
            color: var(--text-dark);
            text-align: justify;
        }

        .resultado-content strong {
            color: var(--primary-color);
            font-weight: 600;
        }

        .resultado-content ul {
            margin: 20px 0;
            padding-left: 25px;
        }

        .resultado-content li {
            margin-bottom: 8px;
            color: var(--text-dark);
        }

        .resultado-content blockquote {
            background: var(--background-light);
            border-left: 4px solid var(--primary-color);
            padding: 20px;
            margin: 25px 0;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-light);
        }

        /* Botões de Ação */
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .action-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 15px 25px;
            border: none;
            border-radius: 30px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 1em;
            min-width: 200px;
            justify-content: center;
        }

        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px var(--shadow-medium);
        }

        .action-btn.primary {
            background: var(--gradient-secondary);
            color: white;
        }

        .action-btn.secondary {
            background: var(--background-white);
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        /* Publicidade do Curso */
        .curso-cta {
            background: var(--gradient-primary);
            color: white;
            padding: 40px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 8px 30px var(--shadow-medium);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .curso-cta::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-size: cover;
            background-position: center;
            opacity: 0.3;
            z-index: 1;
        }

        .curso-cta.reprogramacao::before {
            background-image: url('https://github.com/renatoambrosi/quizresultado/raw/main/assets/images/O%20Ouro%20Web.jpg');
        }

        .curso-cta.atracao::before {
            background-image: url('https://github.com/renatoambrosi/quizresultado/raw/main/assets/images/Lei%20da%20Atracao%20Editavel%20Web.jpg');
        }

        .curso-image {
            width: 200px;
            height: auto;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            position: relative;
            z-index: 2;
        }

        .curso-title {
            font-family: 'Playfair Display', serif;
            font-size: 2em;
            font-weight: 700;
            margin-bottom: 15px;
            position: relative;
            z-index: 2;
        }

        .curso-description {
            font-size: 1.1em;
            margin-bottom: 25px;
            opacity: 0.95;
            line-height: 1.6;
            position: relative;
            z-index: 2;
        }

        .curso-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: white;
            color: var(--primary-color);
            padding: 18px 35px;
            border: none;
            border-radius: 30px;
            font-weight: 700;
            font-size: 1.1em;
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
            z-index: 2;
        }

        .curso-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        /* Loading States */
        .loading {
            text-align: center;
            padding: 60px 20px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--border-light);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Error States */
        .error {
            background: #ffebee;
            color: #c62828;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
            border-left: 4px solid #c62828;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 40px 20px;
            background: var(--background-white);
            border-radius: 15px;
            margin-top: 30px;
            box-shadow: 0 8px 30px var(--shadow-light);
        }

        .footer p {
            color: var(--text-light);
            margin-bottom: 10px;
        }

        .footer a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .header {
                min-height: 250px;
                padding: 15px 0 30px;
                background-position: center top;
            }

            .logo {
                width: 150px;
                margin-bottom: 15px;
            }

            .main-title {
                font-size: 1.8em;
            }

            .subtitle {
                font-size: 1em;
                margin-bottom: 20px;
            }

            .energia-destaque h2 {
                font-size: 2em;
            }

            .share-buttons {
                flex-direction: column;
                align-items: center;
            }

            .share-btn, .action-btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }

            .action-buttons {
                flex-direction: column;
                align-items: center;
            }

            .resultado-content {
                padding: 25px;
            }

            .curso-cta {
                padding: 30px 20px;
            }

            .curso-image {
                width: 150px;
                margin-bottom: 15px;
            }

            .curso-title {
                font-size: 1.6em;
            }

            body {
                background-attachment: scroll;
            }
        }

        @media (max-width: 480px) {
            .header {
                min-height: 200px;
                background-position: center top;
            }

            .logo {
                width: 120px;
                margin-bottom: 10px;
            }

            .main-title {
                font-size: 1.6em;
            }

            .energia-destaque h2 {
                font-size: 1.8em;
            }

            .energia-destaque {
                padding: 20px;
            }

            .percentuais-panel, .resultado-content {
                padding: 20px;
            }

            .curso-image {
                width: 120px;
            }
        }

        /* Animações */
        .fade-in {
            animation: fadeIn 0.8s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .slide-up {
            animation: slideUp 0.8s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Estados escondidos */
        .hidden {
            display: none;
        }

        /* Toast notifications */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--primary-color);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 8px 25px var(--shadow-medium);
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.success {
            background: var(--accent-color);
        }

        .toast.error {
            background: #c62828;
        }
    </style>

    <!-- Preload de recursos importantes -->
    <link rel="preload" href="https://github.com/renatoambrosi/quizresultado/raw/main/assets/images/Logo%20Suellen.png" as="image">
    <link rel="preload" href="https://github.com/renatoambrosi/quizresultado/raw/main/assets/images/Teste%20Prosperidade%20Header.jpg" as="image">
    <link rel="preload" href="https://github.com/renatoambrosi/quizresultado/raw/main/assets/images/Suellen%20Fundo.png" as="image">
    <link rel="preload" href="https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hiA.woff2" as="font" type="font/woff2" crossorigin>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading">
        <div class="spinner"></div>
        <p>Carregando seu resultado...</p>
    </div>

    <!-- Main Content -->
    <div id="main-content" class="hidden">
        <div class="container">
            <!-- Header -->
            <header class="header fade-in">
                <img src="https://github.com/renatoambrosi/quizresultado/raw/main/assets/images/Logo%20Suellen.png" alt="Suellen Seragi" class="logo" loading="lazy">
                <h1 class="main-title" id="dynamic-title">Resultado do Teste de Prosperidade</h1>
                <p class="subtitle">A sua energia predominante é:</p>
            </header>

            <!-- Energia Predominante -->
            <section class="energia-destaque slide-up" id="energia-destaque">
                <h2 id="energia-nome">ENERGIA DA PROSPERIDADE</h2>
                <div class="energia-percentage" id="energia-porcentagem">75%</div>
            </section>

            <!-- Botão Compartilhar Resultado -->
            <div class="share-buttons">
                <button class="share-btn primary" onclick="compartilharResultado()">
                    <i class="fas fa-share-alt"></i>
                    Compartilhar meu resultado
                </button>
            </div>

            <!-- Painel de Percentuais -->
            <section class="percentuais-panel fade-in">
                <h3 class="percentuais-title">Distribuição das suas energias:</h3>
                <div id="energias-list">
                    <!-- Será preenchido dinamicamente -->
                </div>
            </section>

            <!-- Vídeo Único -->
            <section class="video-section slide-up">
                <h3 class="video-title">Assista este vídeo importante para você</h3>
                <div class="video-container">
                    <iframe 
                        id="youtube-video"
                        src="about:blank" 
                        title="Vídeo sobre Teste de Prosperidade"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen
                        loading="lazy">
                    </iframe>
                </div>
            </section>

            <!-- Narrativa do Resultado -->
            <main class="resultado-content fade-in" id="resultado-narrativa">
                <!-- Conteúdo será carregado dinamicamente -->
            </main>

            <!-- Botões de Ação -->
            <div class="action-buttons">
                <button class="action-btn secondary" onclick="compartilharTeste()">
                    <i class="fas fa-share"></i>
                    Compartilhar este teste
                </button>
                <button class="action-btn secondary" onclick="gerarPDF()">
                    <i class="fas fa-download"></i>
                    Baixar PDF
                </button>
            </div>

            <!-- Publicidade do Curso -->
            <section class="curso-cta slide-up" id="curso-publicidade">
                <!-- Conteúdo será carregado dinamicamente -->
            </section>

            <!-- Footer -->
            <footer class="footer">
                <p><strong>Suellen Seragi</strong> - Teste de Prosperidade</p>
                <p>© 2024 - Todos os direitos reservados</p>
                <p><a href="https://www.suellenseragi.com.br" target="_blank">www.suellenseragi.com.br</a></p>
            </footer>
        </div>
    </div>

    <!-- Error Screen -->
    <div id="error-screen" class="hidden">
        <div class="container">
            <div class="error">
                <h2><i class="fas fa-exclamation-triangle"></i> Erro ao carregar resultado</h2>
                <p id="error-message">Não foi possível carregar seu resultado. Verifique o link e tente novamente.</p>
                <button class="action-btn primary" onclick="location.reload()" style="margin-top: 20px;">
                    <i class="fas fa-refresh"></i>
                    Tentar novamente
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <script>
        // ===================================
        // CONFIGURAÇÕES - ALTERE AQUI!!!
        // ===================================
        
        const CONFIG = {
            API_URL: 'https://script.google.com/macros/s/AKfycbz55h1hVNQggbojYu1SXYiiYotkUKkdcEh77Zqmgt0sN55XX3lwc',
            YOUTUBE_VIDEO_ID: 'ALTERE_AQUI_ID_DO_VIDEO', // ⚠️ ALTERE: ID do vídeo do YouTube
            TEST_URL: 'https://quizfront.vercel.app',
            RESULT_BASE_URL: window.location.origin + window.location.pathname,
            
            ENERGIAS: {
                'Medo': { color: '#8B0000', curso: 'reprogramacao' },
                'Desordem': { color: '#FF4500', curso: 'reprogramacao' },
                'Validação': { color: '#4169E1', curso: 'reprogramacao' },
                'Autossuficiência': { color: '#32CD32', curso: 'atracao' },
                'Prosperidade': { color: '#228B22', curso: 'atracao' }
            },

            CURSOS: {
                reprogramacao: {
                    nome: 'O Ouro da Reprogramação Mental',
                    descricao: 'Transforme sua mente e desbloqueie todo seu potencial para uma vida próspera e realizada.',
                    link: 'ALTERE_AQUI_LINK_CURSO_REPROGRAMACAO' // ⚠️ ALTERE: Link do curso
                },
                atracao: {
                    nome: 'Lei da Atração Bíblica',
                    descricao: 'Descubra como alinhar fé e ação para manifestar abundância em todas as áreas da sua vida.',
                    link: 'ALTERE_AQUI_LINK_CURSO_ATRACAO' // ⚠️ ALTERE: Link do curso
                }
            }
        };

        // Mapeamento completo: respostas para energias
        const RESPOSTA_ENERGIA_MAP = {
            // PERGUNTA 1 - Emergência financeira
            "Não me surpreende, eu já esperava.": "Medo",
            "Me viro de qualquer jeito, faço empréstimo rápido ou peço adiantamento.": "Desordem",
            "Resolvo sozinho, não conto com ninguém para não gerar cobrança depois.": "Autossuficiência",
            "Busco a opinião de pessoas que confio para me ajudar a decidir o melhor caminho.": "Validação",
            "Respiro fundo e busco uma solução consciente, sem precipitação.": "Prosperidade",

            // PERGUNTA 2 - Ter muito dinheiro
            "Me assusta. Acho que atrai problemas e pessoas interesseiras.": "Medo",
            "Me confunde. Parece que muda quem a pessoa é.": "Desordem",
            "Penso em como administrar da forma mais eficiente.": "Autossuficiência",
            "Finalmente conseguiria mostrar que sou capaz.": "Validação",
            "Me dá responsabilidade. Dinheiro é uma ferramenta que precisa de propósito.": "Prosperidade",

            // PERGUNTA 3 - Frases sobre dinheiro
            "Melhor ser pobre e honesto do que rico e ganancioso.": "Medo",
            "Dinheiro é feito pra gastar. Depois a gente corre atrás.": "Desordem",
            "O dinheiro tem que me servir.": "Autossuficiência",
            "Dinheiro é importante para ter o que preciso e ser visto como alguém de sucesso.": "Validação",
            "O dinheiro revela quem a pessoa é.": "Prosperidade",

            // PERGUNTA 4 - Alguém enriquece sem valores
            "Raiva. É sempre assim: os bonzinhos só se ferram.": "Medo",
            "Frustração. Parece que nada muda, já fiz o certo e o errado e não consegui nada.": "Desordem",
            "Motivação, porque não existe verdade, apenas resultado.": "Autossuficiência",
            "Se alguém consegue dessa forma, eu também posso, só que da forma certa.": "Validação",
            "Decido estudar mais e subir do jeito certo, mas sem ingenuidade.": "Prosperidade",

            // PERGUNTA 5 - Potencial de gerar renda
            "Duvido. Às vezes acho que minha realidade não permite isso.": "Medo",
            "Não sei nem por onde começar.": "Desordem",
            "Tenho convicção de que, com foco e lógica, eu consigo.": "Autossuficiência",
            "Sinto que preciso alcançar um certo nível grande para me sentir realizado e reconhecido.": "Validação",
            "Acredito que posso crescer se alinhar propósito, sabedoria e ação.": "Prosperidade",

            // PERGUNTA 6 - Conflito sério
            "Evito conversar por medo de desagradar ou ter conflito com a pessoa.": "Medo",
            "Falo demais ou fico no meu canto e acabo piorando a situação, sem querer.": "Desordem",
            "Deixo pra lá e sigo em frente para os meus objetivos.": "Autossuficiência",
            "Tento evitar confronto ou tento resolver mas fico chateado quando não consigo.": "Validação",
            "Converso com calma, busco entender o outro lado e não ver só o meu.": "Prosperidade",

            // PERGUNTA 7 - Críticas negativas
            "Me preocupo com as consequências.": "Medo",
            "Procuro palavras para justificar mas parece que nunca é suficiente.": "Desordem",
            "Ignoro e mudo só se eu quiser.": "Autossuficiência",
            "Fico com raiva e tento provar que o outro está errado a meu respeito.": "Validação",
            "Ouço, reflito mas não me deixo abalar.": "Prosperidade",

            // PERGUNTA 8 - Alguém não age como espera
            "Me afasto para não me decepcionar novamente.": "Medo",
            "Faço cobranças ou reclamações pra ver se a pessoa muda.": "Desordem",
            "Desisto e resolvo não contar mais com essa pessoa pra nada.": "Autossuficiência",
            "Fico irritado mas guardo pra mim para evitar conflitos.": "Validação",
            "Sei que ninguém é obrigado a atender minhas expectativas.": "Prosperidade",

            // PERGUNTA 9 - Novas amizades
            "Prefiro evitar pessoas novas.": "Medo",
            "Tenho um pouco de preguiça de fazer novos contatos.": "Desordem",
            "Avalio se é mais uma pessoa para sugar minha energia.": "Autossuficiência",
            "Sempre quero, mas constantemente me frustro por não conseguir me expressar como desejo.": "Validação",
            "Acredito que as conexões têm que fluir e desenvolver naturalmente.": "Prosperidade",

            // PERGUNTA 10 - Sintomas físicos inesperados
            "Fico preocupado achando que é algo sério.": "Medo",
            "Ignoro até que se torne urgente.": "Desordem",
            "Procuro resolver sozinho com remédios por conta própria.": "Autossuficiência",
            "Torço e peço para me ajudarem ao máximo porque me sinto fragilizado.": "Validação",
            "Creio que está tudo bem, mas me cuido para garantir a boa recuperação.": "Prosperidade",

            // PERGUNTA 11 - Rotina de saúde
            "Sou extremamente zeloso.": "Medo",
            "Até gostaria, mas acabo não ligando pra isso na correria.": "Desordem",
            "Aprendo e faço sozinho, me cobro sempre por melhorias.": "Autossuficiência",
            "Me dedico à saúde para me sentir bem e não falhar com minhas obrigações do dia a dia.": "Validação",
            "Sou conectado com as necessidades do meu corpo.": "Prosperidade",

            // PERGUNTA 12 - Exercícios físicos
            "Não faço por desânimo, medo de lesões ou vergonha.": "Medo",
            "Começo e paro diversas vezes, sempre me perdendo na rotina.": "Desordem",
            "Sou extremamente disciplinado.": "Autossuficiência",
            "Considero fazer mesmo não gostando, pois tenho insatisfação ou vergonha do meu corpo.": "Validação",
            "Pratico com frequência e consciência, respeitando meus limites.": "Prosperidade",

            // PERGUNTA 13 - Melhorar alimentação
            "Fico ansioso e tento mudar, mas não consigo.": "Medo",
            "Faço mudanças bruscas e acabo desistindo rapidamente.": "Desordem",
            "Faço mudanças bruscas e mantenho a dieta rigorosa.": "Autossuficiência",
            "Quando estou bem eu como bem. Mas quando fico mal eu desando.": "Validação",
            "Faço ajustes graduais e consistentes.": "Prosperidade",

            // PERGUNTA 14 - Descansar e recuperar energia
            "Me sinto culpado ou ansioso por não estar produzindo algo.": "Medo",
            "Tenho dificuldade em realmente descansar, a mente fica inquieta.": "Desordem",
            "Não aviso ninguém, apenas vou descansar.": "Autossuficiência",
            "Abro mão do descanso para cumprir minhas obrigações.": "Validação",
            "Descanso com tranquilidade, respeitando o tempo do meu corpo e da minha mente.": "Prosperidade",

            // PERGUNTA 15 - Analisar dificuldades
            "Me conformo, porque a vida é assim.": "Medo",
            "Me distraio fazendo várias coisas para não pensar nisso.": "Desordem",
            "Sinto o quanto a vida não é justa.": "Autossuficiência",
            "Costumo me sentir inútil e impotente para mudar as coisas.": "Validação",
            "Lembro que eu sempre colho o que planto e fico em paz.": "Prosperidade",

            // PERGUNTA 16 - Sensação sobre a vida
            "A realidade é dura e nunca se sabe o que pode acontecer.": "Medo",
            "Que nunca estou em dia com nada, sempre correndo atrás.": "Desordem",
            "Que preciso estar sempre pronto, mesmo que cansado.": "Autossuficiência",
            "Um sentimento controverso: sinto que não tenho valor, mas ao mesmo tempo quero provar que tenho.": "Validação",
            "Priorizo minha paz, mesmo que o mundo caia ao meu redor.": "Prosperidade",

            // PERGUNTA 17 - Perdoar alguém
            "Fico com medo de me machucar novamente ou de ser bobo.": "Medo",
            "Perdoo porque eu não quero carregar mais esse peso no dia a dia.": "Desordem",
            "Eu perdoo sim, mas não tem segunda chance.": "Autossuficiência",
            "Perdoo mesmo sendo difícil, para ficar bem aos olhos de Deus.": "Validação",
            "Perdoo porque sei que o outro deu o melhor que tinha.": "Prosperidade",

            // PERGUNTA 18 - Algo sai do controle
            "Fico ansioso pensando nas consequências negativas.": "Medo",
            "Me perco mentalmente, sem saber exatamente por onde recomeçar.": "Desordem",
            "Resolvo sozinho, pois não quero depender de ninguém.": "Autossuficiência",
            "Fico inquieto e incomodado com as coisas que me atrapalham.": "Validação",
            "Aceito com calma e reorganizo minhas ações com clareza.": "Prosperidade",

            // PERGUNTA 19 - Decisão importante
            "Adio até o último segundo.": "Medo",
            "Faço o que der na hora. Depois eu vejo se foi o certo.": "Desordem",
            "Não pergunto opinião de ninguém. Eu sei lidar com isso.": "Autossuficiência",
            "Evito contrariar pessoas ao tomar decisões.": "Validação",
            "Coloco no papel, penso e ajo com o que tenho em mãos.": "Prosperidade",

            // PERGUNTA 20 - Lidar com erros
            "Me culpo até hoje. Aquilo nunca deveria ter acontecido.": "Medo",
            "Evito pensar nisso. Fico mal quando lembro.": "Desordem",
            "Não gosto que toquem nesse assunto. Eu já superei sozinho.": "Autossuficiência",
            "Fico péssimo, me martirizando.": "Validação",
            "Aprendi com eles. Foram parte do meu processo de amadurecimento.": "Prosperidade",

            // PERGUNTA 21 - Períodos emocionalmente difíceis
            "Me retraio, não é tempo de exposição.": "Medo",
            "Desorganizo tudo. Depois tento arrumar.": "Desordem",
            "Não mudo, mantenho a mesma estratégia.": "Autossuficiência",
            "Choro muito.": "Validação",
            "Reavalio com calma, sabendo que emoção e realidade não se misturam.": "Prosperidade",

            // PERGUNTA 22 - Meta não alcançada
            "Fico com vontade de sumir para não lidar com as consequências.": "Medo",
            "Me incomoda, mas faço quando der.": "Desordem",
            "Faço um plano ainda mais rígido pra compensar.": "Autossuficiência",
            "Fico com a sensação que fracassei.": "Validação",
            "Avalio onde errei e ajusto com calma.": "Prosperidade",

            // PERGUNTA 23 - Oração e conexão espiritual
            "Tento não falhar porque quando falho parece que o dia não é bom e as coisas dão errado.": "Medo",
            "Minha vida é tão corrida que nem sempre consigo manter constância.": "Desordem",
            "Gosto de me conectar no meu tempo, do meu jeito, sem depender de rituais ou grupos.": "Autossuficiência",
            "Tento agradar a Deus mas sinto que quase nunca consigo.": "Validação",
            "Tenho momentos de oração e conexão diária que me fortalecem e me dão direção.": "Prosperidade",

            // PERGUNTA 24 - Espiritualidade funciona como
            "Um lugar pra me esconder quando o mundo parece ameaçador.": "Medo",
            "Um recurso que uso para ficar em paz.": "Desordem",
            "Uma forma de encontrar minhas próprias respostas sem me expor a opiniões alheias.": "Autossuficiência",
            "Uma forma de saber que não estou sozinho e receber direção pra minha vida.": "Validação",
            "É a minha base, estando bem ou mal.": "Prosperidade",

            // PERGUNTA 25 - Pessoa simples falando de prosperidade
            "Acho bonito, mas duvido que dê certo assim.": "Medo",
            "Não entendo como consegue acreditar nisso com a vida que tem.": "Desordem",
            "A fé não basta. Se não houver método, não prospera.": "Autossuficiência",
            "Fico com dó porque parece que está passando vergonha.": "Validação",
            "Me inspira. Já vi milagres saindo de onde ninguém espera.": "Prosperidade",

            // PERGUNTA 26 - Silêncio e espera
            "Me agito. Sinto que estou sendo esquecido.": "Medo",
            "Acabo desistindo. Parece que nada muda mesmo.": "Desordem",
            "Enquanto espero, foco no que tenho em mãos.": "Autossuficiência",
            "Mantenho a aparência de que estou bem, mesmo que internamente esteja lutando com a espera.": "Validação",
            "Fico em paz, mesmo sem respostas imediatas.": "Prosperidade",

            // PERGUNTA 27 - Fez tudo certo mas frutos não chegam
            "Talvez eu não tenha feito direito. Como sempre...": "Medo",
            "Perco as forças (emocionalmente). Começo a desistir por dentro.": "Desordem",
            "Faço ajustes nos cálculos. Se não deu certo, é porque algo foi mal feito.": "Autossuficiência",
            "Sinto que estou sendo injustiçado.": "Validação",
            "Penso que não controlo a colheita. Só precisa de tempo para aprender a crescer.": "Prosperidade",

            // PERGUNTA 28 - O que trava alinhamento com propósito
            "O medo de que seja tarde demais --- ou que não tenha propósito nenhum na minha vida.": "Medo",
            "A correria e obrigações do dia a dia, que sempre tomam todo meu tempo.": "Desordem",
            "A ideia de que é inconcebível depender de pessoas falhas.": "Autossuficiência",
            "Parece que ninguém me enxerga e esse propósito nunca vai acontecer.": "Validação",
            "Ter que aprender a esperar tempo que leva para ter mais respostas.": "Prosperidade",

            // PERGUNTA 29 - Descrever propósito
            "Não sei ao certo... e isso me constrange mais do que eu gostaria de admitir.": "Medo",
            "Depende do dia. Ora tenho dúvida, ora convicção.": "Desordem",
            "Prefiro não tentar resumir. Propósito se vive, não se explica.": "Autossuficiência",
            "Quero me sentir útil e realizada cumprindo meu propósito.": "Validação",
            "Uma jornada mágica, que conecta quem eu sou com o que posso oferecer ao mundo.": "Prosperidade",

            // PERGUNTA 30 - O que deixaria para os outros
            "Nada muito relevante.": "Medo",
            "Nada claro. Vivo dia após dia fazendo meu melhor.": "Desordem",
            "Organização, instruções e legado.": "Autossuficiência",
            "A imagem de alguém que quis acertar embora nem sempre conseguisse.": "Validação",
            "Exemplo de fé, transformação e sementes plantadas.": "Prosperidade"
        };

        // ===================================
        // VARIÁVEIS GLOBAIS
        // ===================================
        
        let dadosUsuario = null;
        let resultadosCalculados = null;

        // ===================================
        // INICIALIZAÇÃO
        // ===================================
        
        document.addEventListener('DOMContentLoaded', () => {
            console.log('🚀 Iniciando página de resultados');
            inicializar();
        });

        async function inicializar() {
            try {
                // Extrair UID da URL
                const uid = extrairUID();
                if (!uid) {
                    throw new Error('UID não fornecida na URL');
                }

                console.log('🔍 UID extraída:', uid);

                // Buscar dados do usuário
                await buscarDadosUsuario(uid);
                
                // Calcular resultados
                calcularResultados();
                
                // Renderizar página
                renderizarPagina();
                
                // Configurar vídeo
                configurarVideo();
                
                // Mostrar conteúdo
                mostrarConteudo();

                console.log('✅ Página carregada com sucesso');
                
            } catch (error) {
                console.error('❌ Erro na inicialização:', error);
                mostrarErro(error.message);
            }
        }

        function extrairUID() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('uid');
        }

        async function buscarDadosUsuario(uid) {
            try {
                showToast('Carregando seus dados...', 'info');
                
                const response = await fetch(`${CONFIG.API_URL}?uid=${uid}`);
                
                if (!response.ok) {
                    throw new Error(`Erro na API: ${response.status}`);
                }
                
                const dadosAPI = await response.json();
                console.log('📥 Dados brutos da API:', dadosAPI);
                console.log('📋 Campos disponíveis:', Object.keys(dadosAPI));
                
                // Processar estrutura da planilha
                if (!dadosAPI || typeof dadosAPI !== 'object') {
                    throw new Error('Resposta inválida da API');
                }
                
                // Extrair nome do campo "Qual o seu nome"
                const nome = dadosAPI["Qual o seu nome"] || dadosAPI.nome || '';
                console.log('👤 Nome extraído:', nome);
                
                // Extrair email
                const email = dadosAPI.email || '';
                console.log('📧 Email extraído:', email);
                
                // Extrair submission_id
                const submissionId = dadosAPI.submission_id || uid;
                console.log('🆔 Submission ID:', submissionId);
                
                // Extrair respostas - são todas as outras propriedades que não são metadados
                const respostas = [];
                const camposMetadados = ['submission_id', 'Qual o seu nome', 'email', 'timestamp', 'uid'];
                
                // Primeiro, vamos listar todos os campos para debug
                console.log('🔍 Analisando campos:');
                Object.keys(dadosAPI).forEach(chave => {
                    console.log(`  - ${chave}: ${dadosAPI[chave]}`);
                    
                    if (!camposMetadados.includes(chave) && dadosAPI[chave] && dadosAPI[chave].trim() !== '') {
                        respostas.push(dadosAPI[chave].trim());
                    }
                });
                
                console.log(`📊 Total de respostas encontradas: ${respostas.length}`);
                console.log('📝 Primeiras 5 respostas:', respostas.slice(0, 5));
                
                // Validar se temos pelo menos algumas respostas
                if (respostas.length === 0) {
                    throw new Error('Nenhuma resposta encontrada nos dados');
                }
                
                if (respostas.length !== 30) {
                    console.warn(`⚠️ Esperadas 30 respostas, encontradas: ${respostas.length}`);
                    // Não vamos parar por isso, vamos processar o que temos
                }
                
                dadosUsuario = {
                    nome: nome,
                    email: email,
                    submissionId: submissionId,
                    respostas: respostas
                };
                
                console.log('✅ Processamento concluído:', {
                    nome: nome,
                    email: email,
                    totalRespostas: respostas.length
                });
                
            } catch (error) {
                console.error('❌ Erro ao buscar dados:', error);
                throw new Error('Não foi possível carregar seus dados. Verifique o link e tente novamente.');
            }
        }

        function calcularResultados() {
            try {
                const contadores = {
                    'Medo': 0,
                    'Desordem': 0,
                    'Validação': 0,
                    'Autossuficiência': 0,
                    'Prosperidade': 0
                };

                let respostasValidas = 0;
                let respostasNaoEncontradas = [];

                // Contar respostas por energia usando o mapeamento correto
                dadosUsuario.respostas.forEach((resposta, index) => {
                    const energia = RESPOSTA_ENERGIA_MAP[resposta];
                    
                    if (energia) {
                        contadores[energia]++;
                        respostasValidas++;
                        console.log(`✅ Pergunta ${index + 1}: "${resposta}" → ${energia}`);
                    } else {
                        respostasNaoEncontradas.push({
                            pergunta: index + 1,
                            resposta: resposta
                        });
                        console.warn(`⚠️ Pergunta ${index + 1}: Resposta não encontrada: "${resposta}"`);
                        
                        // Fallback: tentar encontrar similaridade parcial
                        const energiaFallback = tentarFallback(resposta);
                        if (energiaFallback) {
                            contadores[energiaFallback]++;
                            respostasValidas++;
                            console.log(`🔄 Fallback aplicado para pergunta ${index + 1}: "${resposta}" → ${energiaFallback}`);
                        }
                    }
                });

                // Log detalhado dos resultados
                console.log(`📊 Análise concluída:`);
                console.log(`  ✅ Respostas válidas: ${respostasValidas}/30`);
                console.log(`  ⚠️ Respostas não encontradas: ${respostasNaoEncontradas.length}`);
                console.log(`  📋 Distribuição:`, contadores);

                if (respostasNaoEncontradas.length > 0) {
                    console.log(`🔍 Respostas não encontradas:`, respostasNaoEncontradas);
                }

                // Calcular percentuais (cada energia tem no máximo 6 respostas = 100%)
                const percentuais = {};
                Object.keys(contadores).forEach(energia => {
                    percentuais[energia] = Math.round((contadores[energia] / 6) * 100);
                });

                // Encontrar energia predominante
                let energiaPredominante = 'Prosperidade';
                let maiorPercentual = 0;
                
                Object.keys(percentuais).forEach(energia => {
                    if (percentuais[energia] > maiorPercentual) {
                        maiorPercentual = percentuais[energia];
                        energiaPredominante = energia;
                    }
                });

                // Em caso de empate, priorizar Prosperidade
                if (maiorPercentual === 0) {
                    energiaPredominante = 'Prosperidade';
                    maiorPercentual = percentuais['Prosperidade'] || 0;
                }

                // Determinar nível da Prosperidade se aplicável
                let nivelProsperidade = null;
                if (energiaPredominante === 'Prosperidade') {
                    if (maiorPercentual <= 50) {
                        nivelProsperidade = 1;
                    } else if (maiorPercentual <= 75) {
                        nivelProsperidade = 2;
                    } else {
                        nivelProsperidade = 3;
                    }
                }

                resultadosCalculados = {
                    contadores,
                    percentuais,
                    energiaPredominante,
                    maiorPercentual,
                    nivelProsperidade,
                    respostasValidas,
                    respostasNaoEncontradas,
                    totalEsperado: 30
                };

                console.log('🎯 Resultado final:', {
                    energiaPredominante: energiaPredominante,
                    percentual: maiorPercentual + '%',
                    nivel: nivelProsperidade ? `Nível ${nivelProsperidade}` : 'N/A'
                });

                console.log('📊 Percentuais finais:', percentuais);
                
            } catch (error) {
                console.error('❌ Erro no cálculo:', error);
                throw new Error('Erro ao processar resultados');
            }
        }

        // Função auxiliar para tentar encontrar energia por similaridade
        function tentarFallback(resposta) {
            const palavrasChave = {
                'Medo': ['medo', 'preocup', 'ansio', 'nervos', 'receio', 'temor', 'duvid', 'insegur'],
                'Desordem': ['bagunç', 'confus', 'desorganiz', 'caos', 'atrapalhad', 'perdi', 'esquec', 'correria'],
                'Validação': ['aprovação', 'reconhec', 'valid', 'aceita', 'import', 'valor', 'opinion', 'outros'],
                'Autossuficiência': ['sozinho', 'independ', 'proprio', 'conta', 'confio', 'resolv', 'depend'],
                'Prosperidade': ['paz', 'equilibr', 'conscien', 'sabi', 'calm', 'fluid', 'natur', 'harmoni']
            };

            const respostaLower = resposta.toLowerCase();
            
            for (const [energia, palavras] of Object.entries(palavrasChave)) {
                for (const palavra of palavras) {
                    if (respostaLower.includes(palavra)) {
                        return energia;
                    }
                }
            }
            
            return null; // Não encontrou similaridade
        }

        function renderizarPagina() {
            try {
                // Atualizar título personalizado
                atualizarTitulos();
                
                // Renderizar energia predominante
                renderizarEnergiaPredominante();
                
                // Renderizar painel de percentuais
                renderizarPainelPercentuais();
                
                // Renderizar narrativa do resultado
                renderizarNarrativa();
                
                // Renderizar publicidade do curso
                renderizarCurso();
                
                // Atualizar meta tags
                atualizarMetaTags();
                
            } catch (error) {
                console.error('❌ Erro na renderização:', error);
                throw new Error('Erro ao exibir resultado');
            }
        }

        function atualizarTitulos() {
            const nome = dadosUsuario.nome || '';
            const tituloPersonalizado = nome 
                ? `Resultado do Teste de Prosperidade de ${nome}`
                : 'Resultado do Teste de Prosperidade';
            
            document.getElementById('dynamic-title').textContent = tituloPersonalizado;
            document.getElementById('page-title').textContent = tituloPersonalizado;
        }

        function renderizarEnergiaPredominante() {
            const { energiaPredominante, maiorPercentual, nivelProsperidade } = resultadosCalculados;
            
            let nomeEnergia = energiaPredominante.toUpperCase();
            if (energiaPredominante === 'Prosperidade' && nivelProsperidade) {
                nomeEnergia += ` - NÍVEL ${nivelProsperidade}`;
            }
            
            document.getElementById('energia-nome').textContent = `ENERGIA DA ${nomeEnergia}`;
            document.getElementById('energia-porcentagem').textContent = `${maiorPercentual}%`;
            
            // Aplicar cor da energia
            const cor = CONFIG.ENERGIAS[energiaPredominante]?.color || '#228B22';
            const elemento = document.getElementById('energia-destaque');
            elemento.style.background = `linear-gradient(135deg, ${cor}, ${cor}CC)`;
        }

        function renderizarPainelPercentuais() {
            const { percentuais } = resultadosCalculados;
            const container = document.getElementById('energias-list');
            
            // Ordenar energias por percentual (decrescente)
            const energiasOrdenadas = Object.entries(percentuais)
                .sort(([,a], [,b]) => b - a);
            
            container.innerHTML = '';
            
            energiasOrdenadas.forEach(([energia, percentual]) => {
                const item = document.createElement('div');
                item.className = 'energia-item';
                
                const cor = CONFIG.ENERGIAS[energia]?.color || '#228B22';
                
                item.innerHTML = `
                    <span class="energia-name">Energia da ${energia}</span>
                    <div class="energia-bar">
                        <div class="energia-fill" style="background: linear-gradient(90deg, ${cor}, ${cor}AA);"></div>
                    </div>
                    <span class="energia-percent">${percentual}%</span>
                `;
                
                container.appendChild(item);
                
                // Animar barra
                setTimeout(() => {
                    const fill = item.querySelector('.energia-fill');
                    fill.style.width = `${percentual}%`;
                }, 100);
            });
        }

        function renderizarNarrativa() {
            const { energiaPredominante, nivelProsperidade } = resultadosCalculados;
            const container = document.getElementById('resultado-narrativa');
            
            let conteudo = getConteudoEnergia(energiaPredominante, nivelProsperidade);
            
            container.innerHTML = conteudo;
        }

        function renderizarCurso() {
            const { energiaPredominante, nivelProsperidade } = resultadosCalculados;
            const container = document.getElementById('curso-publicidade');
            
            // Determinar qual curso mostrar
            let tipoCurso = 'reprogramacao'; // padrão
            
            if (energiaPredominante === 'Autossuficiência' || 
                (energiaPredominante === 'Prosperidade' && (nivelProsperidade === 2 || nivelProsperidade === 3))) {
                tipoCurso = 'atracao';
            }
            
            const curso = CONFIG.CURSOS[tipoCurso];
            
            // URLs das imagens dos cursos
            const imagensCursos = {
                reprogramacao: 'https://github.com/renatoambrosi/quizresultado/raw/main/assets/images/O%20Ouro%20Web.jpg',
                atracao: 'https://github.com/renatoambrosi/quizresultado/raw/main/assets/images/Lei%20da%20Atracao%20Editavel%20Web.jpg'
            };
            
            // Adicionar classe CSS para background específico
            container.className = `curso-cta slide-up ${tipoCurso}`;
            
            container.innerHTML = `
                <img src="${imagensCursos[tipoCurso]}" alt="${curso.nome}" class="curso-image">
                <h3 class="curso-title">${curso.nome}</h3>
                <p class="curso-description">${curso.descricao}</p>
                <a href="${curso.link}" class="curso-btn" target="_blank">
                    <i class="fas fa-graduation-cap"></i>
                    Quero conhecer o curso
                </a>
            `;
        }

        function configurarVideo() {
            const iframe = document.getElementById('youtube-video');
            const videoUrl = `https://www.youtube.com/embed/${CONFIG.YOUTUBE_VIDEO_ID}?rel=0&showinfo=0&autoplay=0`;
            iframe.src = videoUrl;
        }

        function mostrarConteudo() {
            document.getElementById('loading-screen').classList.add('hidden');
            document.getElementById('main-content').classList.remove('hidden');
            
            // Adicionar animações escalonadas
            const elementos = document.querySelectorAll('.fade-in, .slide-up');
            elementos.forEach((el, index) => {
                setTimeout(() => {
                    el.style.animationDelay = `${index * 0.1}s`;
                }, 50);
            });
        }

        function mostrarErro(mensagem) {
            document.getElementById('loading-screen').classList.add('hidden');
            document.getElementById('error-message').textContent = mensagem;
            document.getElementById('error-screen').classList.remove('hidden');
        }

        function atualizarMetaTags() {
            const { energiaPredominante } = resultadosCalculados;
            const nome = dadosUsuario.nome || '';
            
            const titulo = nome 
                ? `${nome} descobriu sua Energia da ${energiaPredominante}!`
                : `Descubra sua energia predominante - Teste de Prosperidade`;
            
            const descricao = `Resultado: Energia da ${energiaPredominante}. Faça o teste e descubra qual energia predomina em sua vida!`;
            
            // Atualizar meta tags
            document.getElementById('og-title').content = titulo;
            document.getElementById('og-description').content = descricao;
            document.getElementById('twitter-title').content = titulo;
            document.getElementById('twitter-description').content = descricao;
            
            // Atualizar URL
            const currentUrl = window.location.href;
            document.getElementById('og-url').content = currentUrl;
        }

        // ===================================
        // FUNÇÕES DE COMPARTILHAMENTO
        // ===================================
        
        async function compartilharResultado() {
            const { energiaPredominante, maiorPercentual } = resultadosCalculados;
            const nome = dadosUsuario.nome || 'Alguém especial';
            const currentUrl = window.location.href;
            
            const texto = `🌟 ${nome} descobriu sua energia predominante: ${energiaPredominante} (${maiorPercentual}%)!\n\n✨ Veja o resultado completo aqui: ${currentUrl}\n\n🔮 Faça você também o Teste de Prosperidade: ${CONFIG.TEST_URL}`;
            
            await compartilhar(texto, currentUrl, 'Meu Resultado - Teste de Prosperidade');
        }

        async function compartilharTeste() {
            const texto = `🔮 Descubra qual energia predomina em sua vida!\n\n✨ Faça o Teste de Prosperidade gratuito e receba seu resultado personalizado.\n\n🌟 Acesse agora: ${CONFIG.TEST_URL}`;
            
            await compartilhar(texto, CONFIG.TEST_URL, 'Teste de Prosperidade');
        }

        async function compartilhar(texto, url, titulo) {
            try {
                // Tentar Web Share API primeiro (móvel)
                if (navigator.share) {
                    await navigator.share({
                        title: titulo,
                        text: texto,
                        url: url
                    });
                    showToast('Compartilhado com sucesso!', 'success');
                    return;
                }
                
                // Fallback para WhatsApp
                const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(texto)}`;
                window.open(whatsappUrl, '_blank');
                showToast('Redirecionando para WhatsApp...', 'info');
                
            } catch (error) {
                console.error('Erro ao compartilhar:', error);
                
                // Fallback: copiar para clipboard
                try {
                    await navigator.clipboard.writeText(texto);
                    showToast('Texto copiado! Cole onde desejar.', 'success');
                } catch (clipboardError) {
                    showToast('Erro ao compartilhar. Tente novamente.', 'error');
                }
            }
        }

        // ===================================
        // GERAÇÃO DE PDF
        // ===================================
        
        async function gerarPDF() {
            try {
                showToast('Gerando PDF...', 'info');
                
                // Implementar geração de PDF aqui
                // Por enquanto, um placeholder
                
                await new Promise(resolve => setTimeout(resolve, 2000));
                showToast('PDF gerado com sucesso!', 'success');
                
            } catch (error) {
                console.error('Erro ao gerar PDF:', error);
                showToast('Erro ao gerar PDF. Tente novamente.', 'error');
            }
        }

        // ===================================
        // UTILITÁRIOS
        // ===================================
        
        function showToast(message, type = 'info') {
            const container = document.getElementById('toast-container');
            
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            
            container.appendChild(toast);
            
            // Mostrar
            setTimeout(() => toast.classList.add('show'), 100);
            
            // Remover após 3 segundos
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => container.removeChild(toast), 300);
            }, 3000);
        }

        function getConteudoEnergia(energia, nivel = null) {
            const conteudos = {
                'Medo': `
                    <h3>ENERGIA DO MEDO</h3>
                    
                    <p>Muitos me falam que se sentem como se vivessem com o freio de mão puxado. Como se tivesse uma barreira invisível que impedisse de romper na vida. Pelo seu resultado no teste, você se sente assim, não é?</p>
                    
                    <p>Tenta avançar, tenta mudar... mas não consegue e parece que sempre tem algo dentro que sempre fala:</p>
                    
                    <p><strong>"E se der errado?"</strong></p>
                    
                    <p>Você não chama isso de medo. Às vezes diz que é "bom senso", entende como ver a realidade, às vezes se convence de que é só prudência e responsabilidade. Mas no fundo, o medo está dirigindo sua vida. Silenciosamente e constantemente.</p>
                    
                    <p>Sabe o que é pior? Ele não chega gritando. Chega como dúvida.</p>
                    
                    <p>Como aquela sensação de que agora não é o momento. Como aquela desculpa que parece sensata, mas te prende no mesmo lugar de sempre.</p>
                    
                    <blockquote>"Aquilo que temo me sobrevém." - Jó 3:25 (NVI)</blockquote>
                    
                    <p>Você pode até estar vivendo uma vida sem grandes tragédias. Mas se for honesto... também não está colhendo grandes frutos, é ou não é?</p>
                    
                    <p>Porque o medo — mesmo disfarçado de lógica racional — rouba exatamente o que a prosperidade precisa para florescer: visão, ação e confiança.</p>
                    
                    <h4>Onde isso te levou?</h4>
                    
                    <p>Você aprendeu a viver no modo sobrevivência. Evita risco, evita conflito, evita desconforto.</p>
                    
                    <p>Mas, junto com tudo isso, sabe o que também está inconscientemente evitando? Eu te falo:</p>
                    
                    <ul>
                        <li>Crescimento</li>
                        <li>Conexões reais</li>
                        <li>Decisões ousadas</li>
                        <li>E o tipo de vida que você sente que nasceu pra viver</li>
                    </ul>
                    
                    <p>É como se existisse uma versão sua pronta pra avançar, mas mantida em silêncio por uma programação antiga.</p>
                    
                    <h4>Isso tem jeito?</h4>
                    
                    <p>Tem. Mas não começa mudando o mundo lá fora. Começa quando você <strong>para de se identificar com o medo</strong> e entende: ele é um visitante, não o dono da casa.</p>
                    
                    <blockquote>"Pois Deus não nos deu espírito de medo, mas de poder, amor e equilíbrio." - 2 Timóteo 1:7 (NVI)</blockquote>
                    
                    <p>Você não precisa sentir coragem pra agir. Mas precisa agir com fé até que a coragem se torne seu novo normal.</p>
                `,
                
                'Desordem': `
                    <h3>ENERGIA DA DESORDEM</h3>
                    
                    <p>A sensação é que você está sempre acelerado. Tentando resolver isso e aquilo, correndo pra não esquecer nada, ou pra não atrasar ainda mais. Sempre em dúvida se fez o bastante.</p>
                    
                    <p>Mas no fundo, você sabe: <strong>você não está no controle — está só apagando incêndio.</strong></p>
                    
                    <p>Essa é a marca da energia da desordem: <strong>Age muito, mas é pouco eficaz. Faz muito mas parece ter pouco resultado.</strong></p>
                    
                    <p>Sua mente não para, seu dia não rende, sua paz não chega. Você vive ocupado... mas os resultados não acompanham.</p>
                    
                    <p>Não é que você não tenha capacidade. Você tem. O problema é que a energia que te move é confusa, fragmentada, sem foco.</p>
                    
                    <h4>Onde isso te levou?</h4>
                    
                    <p>Desordem não é só bagunça externa (embora às vezes reflita nisso também). É um reflexo da forma como você lida com sua própria energia.</p>
                    
                    <p>Quando você está desconectado da sua essência, sua rotina vira uma resposta automática ao caos.</p>
                    
                    <p>Você vive respondendo urgências — mas nunca toca naquilo que <strong>realmente importa</strong>.</p>
                    
                    <p>E aí surgem os sintomas:</p>
                    <ul>
                        <li>Cansaço que não passa</li>
                        <li>Falta de clareza sobre o que é prioridade</li>
                        <li>Sensação de desperdício de tempo e de potencial</li>
                        <li>Relações tensas, pendências acumuladas</li>
                    </ul>
                    
                    <p>A prosperidade até tenta se manifestar na sua vida, mas encontra um terreno instável e confuso, emocionalmente poluído e cheio de ruídos e barulho, muito barulho.</p>
                    
                    <h4>Isso tem solução?</h4>
                    
                    <p>Tem. Mas começa com uma escolha: <strong>Parar de confundir agitação com progresso.</strong></p>
                    
                    <blockquote>"Portanto, tudo deve ser feito com ordem e de maneira correta." - 1 Coríntios 14:40 (NTLH)</blockquote>
                    
                    <p>A desordem externa começa a se resolver quando você reestabelece sua ordem interna: decidir o que vale a pena, o que fica, o que sai, o que é prioridade, o que te guia.</p>
                    
                    <p>Prosperidade precisa de espaço na sua mente. Ela não se manifesta em ambientes congestionados, nem em mentes atoladas e confusas.</p>
                    
                    <p>Você não precisa fazer mais. Precisa <strong>fazer menos, com mais consciência.</strong></p>
                `,
                
                'Validação': `
                    <h3>ENERGIA DA VALIDAÇÃO</h3>
                    
                    <p><strong>Você cresceu com um desejo sincero:</strong> ser amado. Ser notado. Ser importante pra alguém. Mas o que encontrou foram respostas frias, repreensões constrangedoras, comparações que machucavam, e tentativas de acertar que sempre pareciam pequenas demais.</p>
                    
                    <p>É como se, por mais que você fizesse, nunca fosse o bastante.</p>
                    
                    <p>Você queria pertencer, ser apreciado. Queria ser abraçado quando errasse. Elogiado quando tentava se expressar. Queria que alguém olhasse pra você e dissesse: <strong>"Você tem valor, e é importante."</strong></p>
                    
                    <p>Mas isso nunca veio. Veio o contrário:</p>
                    
                    <ul>
                        <li>O presente ignorado</li>
                        <li>A entrega que virou piada</li>
                        <li>Nunca se sentiu bem-vindo</li>
                        <li>O esforço que não gerou admiração — só cobrança</li>
                        <li>O coração bom que só recebia esporro</li>
                        <li>Se sentia invisível</li>
                        <li>E o sentimento cruel de estar sempre errado, inadequado</li>
                    </ul>
                    
                    <h4>Onde isso te levou?</h4>
                    
                    <p>Com o tempo você tentou esconder sua dor e deixar de ser vulnerável (para se blindar de rejeição). Mas a realidade é que por dentro você estava chorando, e com frequência chorava por fora também.</p>
                    
                    <p>Você passou a viver por um ideal silencioso:</p>
                    <ul>
                        <li>"Preciso mostrar que tenho valor."</li>
                        <li>"Preciso deixar de ser um fracasso."</li>
                        <li>"Sei que tenho potencial e preciso mostrar."</li>
                    </ul>
                    
                    <p>Mas esse dia nunca chegava. Você viveu fases boas, achou que agora ia... mas logo voltava tudo pro mesmo ciclo: a sensação de ser ignorado, a comparação que irrita, a vergonha de sonhar alto e ouvir que era "ilusão".</p>
                    
                    <h4>E por que isso acontece?</h4>
                    
                    <p>Porque em algum momento — na infância, na escola, nos relacionamentos — <strong>algo faltou dentro de você: a convicção de que tem valor só por existir.</strong></p>
                    
                    <p>Você passou a acreditar que precisava se provar o tempo todo, para você e para outros. E quando falhava, isso era como uma confirmação de que você era aquilo tudo que se repetia dentro da sua cabeça.</p>
                    
                    <h4>Isso tem solução?</h4>
                    
                    <p>Tem. Mas não com mais esforço. Não tentando agradar de novo. Não tentando provar mais uma vez o seu valor.</p>
                    
                    <p><strong>Rejeição não se cura com desempenho. Se cura com verdade.</strong> Com saber quem você é e que seu valor independe de qualquer coisa ou pessoa. Seu valor vem de Deus.</p>
                    
                    <blockquote>"Mesmo que meu pai e minha mãe me abandonem, o Senhor cuidará de mim." - Salmo 27:10 (NTLH)</blockquote>
                    
                    <blockquote>"Visto que és precioso aos meus olhos, digno de honra, e eu te amo..." - Isaías 43:4 (ARA)</blockquote>
                    
                    <p>E o que Ele vê... não é fracasso. É um coração que sempre quis acertar. Mesmo sem amor. Mesmo sem colo. Mesmo sem aplauso.</p>
                `,
                
                'Autossuficiência': `
                    <h3>ENERGIA DA AUTOSSUFICIÊNCIA</h3>
                    
                    <p>Você aprendeu a se virar sozinho. Na falta de apoio, desenvolveu soluções. Na ausência de direção, criou o próprio caminho. Na dor, virou força.</p>
                    
                    <p>E isso não é pouca coisa. Foi o que te fez resistir quando muitos teriam parado.</p>
                    
                    <p>Mas agora você sente o peso de ter que ser forte o tempo todo. E no fundo, sabe que essa independência virou um escudo. Um mecanismo. Uma armadura que te protege — mas também te isola.</p>
                    
                    <h4>Onde isso te levou?</h4>
                    
                    <p>A energia da autossuficiência não impede que você prospere financeiramente. Mas ela faz você prosperar <strong>do jeito mais cansativo possível</strong>.</p>
                    
                    <p>Você tem que pensar por todos. Decidir por todos. Executar por todos.</p>
                    
                    <p>Você até tenta confiar... Mas se algo sai do controle, já pensa: "Deixa que eu resolvo".</p>
                    
                    <p>Você se cobra mais do que deveria, ajuda mais do que aguenta, e recebe menos do que merece.</p>
                    
                    <p>E às vezes, mesmo no meio das conquistas, sente um vazio que não faz sentido. Porque o fardo está pesado demais pra alguém que aprendeu a não pedir ajuda.</p>
                    
                    <h4>Qual é a raiz?</h4>
                    
                    <p>Autossuficiência é uma defesa. Ela nasce quando você entende que contar com os outros <strong>é arriscado demais</strong>.</p>
                    
                    <p>Talvez já tenha sido decepcionado, traído ou esquecido. Ou então teve que amadurecer cedo, assumir responsabilidades que não eram suas.</p>
                    
                    <p>E ali, você tomou uma decisão silenciosa: <strong>"Eu vou dar conta. Nem que seja sozinho."</strong></p>
                    
                    <p>E deu. Mas agora precisa desaprender. Não o que você construiu — mas o jeito como você tenta sustentar tudo sozinho.</p>
                    
                    <h4>Isso tem solução?</h4>
                    
                    <p>Tem. Mas exige coragem. <strong>A coragem de baixar a guarda.</strong></p>
                    
                    <p>Você não foi criado pra carregar o mundo nas costas. Você foi criado pra fluir com leveza, direção e sabedoria.</p>
                    
                    <blockquote>"Confie no Senhor de todo o seu coração e não se apoie em seu próprio entendimento." - Provérbios 3:5 (NVI)</blockquote>
                    
                    <p>A verdadeira força não está em controlar tudo. Está em saber <strong>em quem você se apoia quando solta o controle: em Deus. Você não está sozinho.</strong></p>
                `,
                
                'Prosperidade': `
                    <h3>ENERGIA DA PROSPERIDADE${nivel ? ` - NÍVEL ${nivel}` : ''}</h3>
                    
                    ${nivel === 1 ? `
                        <p>Você está no caminho certo! O fato de ter uma porcentagem de prosperidade maior que as outras em seu resultado, já indica que uma semente poderosa foi plantada em você. Existe uma intuição, uma busca por algo maior, que te move.</p>
                        
                        <p>No entanto, é natural que, com energia de prosperidade nível 1, você ainda sinta a influência de outras energias que podem estar te segurando. Talvez o medo ainda sussurre dúvidas, a desordem traga alguma confusão, a autossuficiência te impeça de pedir ajuda, ou a busca por validação externa te desvie do seu próprio valor.</p>
                        
                        <p>Essa é uma fase de reconhecimento e de ajustes. Você já tem a direção, mas precisa fortalecer os passos. A prosperidade para você, é um potencial latente que precisa ser nutrido com consciência e intenção.</p>
                        
                        <blockquote>"Porque a vereda dos justos é como a luz da aurora, que vai brilhando mais e mais até ser dia perfeito." - Provérbios 4:18 (NVI)</blockquote>
                        
                        <p>Sua luz já começou a brilhar. O desafio agora é não permitir que os resquícios das outras energias a ofusquem.</p>
                    ` : nivel === 2 ? `
                        <p>Você está em um ponto de virada poderoso! Com esse nível de energia da prosperidade, você já demonstrou uma capacidade notável de transcender as limitações das outras energias. Você não apenas vislumbra a prosperidade, mas já a experimenta de forma consistente em diversas áreas da sua vida.</p>
                        
                        <p>Nesse nível, as outras energias (medo, desordem, autossuficiência, validação) não te paralisam mais, mas podem surgir como "testes" e tentações, tentando desviar seu foco ou atrasar seu progresso.</p>
                        
                        <p>Esta é uma fase de consolidação e expansão. Você já construiu uma base sólida e agora está pronto para acelerar o seu crescimento.</p>
                        
                        <blockquote>"Mas os que esperam no Senhor renovarão as suas forças. Voarão alto como águias; correrão e não ficarão exaustos, andarão e não se fatigarão." - Isaías 40:31 (NVI)</blockquote>
                        
                        <p>Sua força já é grande, mas a verdadeira sabedoria está em saber quando agir e quando esperar, confiando no processo.</p>
                    ` : `
                        <p>Existe algo diferente em você. Não é pressa. Não é desespero. É uma firmeza interna que, mesmo quando tudo parece incerto, te mantém no eixo. Você já entendeu que prosperidade não é sobre ter muito, nem sobre parecer bem. É sobre estar pleno, se sentir completo.</p>
                        
                        <p>É sobre saber que está no caminho certo — mesmo quando ainda falta chão. Essa é a energia da prosperidade: a confiança madura de quem plantou com consciência, está regando com disciplina, e sabe esperar o tempo da colheita, descansando e confiando em Deus.</p>
                        
                        <p>O que essa energia já te trouxe:</p>
                        <ul>
                            <li>Clareza sobre o que importa</li>
                            <li>Paz nas decisões</li>
                            <li>Autonomia emocional</li>
                            <li>Um senso de valor que não depende de validação externa</li>
                            <li>E uma relação cada vez mais saudável com o dinheiro, com as pessoas, com o próprio sucesso</li>
                        </ul>
                        
                        <p>Você já não corre atrás. Você atrai. Você constrói. Você sustenta com paz. Você vive no fluxo do rio, onde as coisas acontecem no tempo certo, sem forçar a barra.</p>
                        
                        <blockquote>"Bem-aventurado o homem que não anda segundo o conselho dos ímpios, nem se detém no caminho dos pecadores, nem se assenta na roda dos escarnecedores. Antes tem o seu prazer na lei do Senhor, e na sua lei medita de dia e de noite. Pois será como a árvore plantada junto a ribeiros de águas, a qual dá o seu fruto no seu tempo; as suas folhas não caem, e tudo quanto fizer prosperará." - Salmo 1:1-3 (ARC)</blockquote>
                        
                        <p>Para você, não vou recomendar nenhum curso específico. Como o mestre disse, "ide e fazei discípulos". Enquanto cumpre seu propósito de vida, e serve a Deus com todo o seu melhor, não deixe de ensinar o que você sabe.</p>
                    `}
                `
            };
            
            return conteudos[energia] || conteudos['Prosperidade'];
        }

        // ===================================
        // ANALYTICS E TRACKING
        // ===================================
        
        function trackEvent(action, category = 'Resultado', label = '') {
            // Implementar tracking aqui (Google Analytics, etc.)
            console.log('📊 Event tracked:', { action, category, label });
        }

        // Track visualização da página
